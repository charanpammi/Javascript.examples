<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <h1>Weather application using API</h1>

    <form id="form">

    <label for="weather" id="entercity">Enter Your city :</label>
    <input type="text" id="city">
    <button type="submit" id="button" >Get Weather data</button>

    </form>
    
    <div id="res"></div>

    <script>

        const key = "028b070a775f95f3eca121e70536dd65";
        const url = `https://api.openweathermap.org/data/2.5/weather?appid=${key}`;

        function weather(city){

            return new Promise ((resolve, reject) => {

            const a = new XMLHttpRequest

            a.open('GET', `${url}&q=${city}`);

            a.onload = () => {

                if ( a.status === 200 ) {

                    resolve(JSON.parse(a.responseText))
                }
                else {
                    reject (a.statusText)
                }
            }
            a.send();

            }
            
            )
        }

        document.getElementById("button").addEventListener('click', (event) => {

            event.preventDefault();

            const city = document.getElementById("city").value;

            weather(city)

            .then((data) => { 
                
                document.getElementById("res").innerHTML=
                `temperature is : ${data.main.temp}`
            }

            )

            .catch((error) => {

                console.log(error);
            }

            )

        }
        
        )

    </script>
    
</body>
</html>